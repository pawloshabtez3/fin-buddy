# Requirements Document

## Introduction

FinBuddy is an AI-powered personal finance assistant web application that enables users to track expenses, visualize spending patterns, and receive personalized financial insights. The system integrates Supabase for authentication and data storage, Next.js for the frontend framework, and Google Gemini API for AI-powered financial analysis. Users can manually enter expenses, view categorized spending data through interactive charts, and receive actionable recommendations to improve their financial habits.

## Glossary

- **FinBuddy System**: The complete web application including frontend, backend, database, and AI integration components
- **User**: An authenticated individual who uses FinBuddy to track and analyze personal expenses
- **Expense**: A financial transaction record containing amount, category, date, and optional note
- **Supabase Auth**: The authentication service provided by Supabase for user identity management
- **Dashboard**: The main interface displaying expense summaries, visualizations, and AI insights
- **AI Insights**: Natural language financial analysis generated by Google Gemini API
- **Expense Entry Form**: The user interface component for creating or editing expense records
- **Category**: A classification label for expenses (e.g., food, transportation, entertainment)
- **Monthly Summary**: An aggregated view of total spending within a calendar month
- **Supabase Database**: The PostgreSQL database hosted by Supabase for storing user and expense data

## Requirements

### Requirement 1

**User Story:** As a new user, I want to create an account and log in securely, so that my financial data remains private and accessible only to me.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide a sign-up interface that accepts email and password credentials
2. WHEN a user submits valid sign-up credentials, THE FinBuddy System SHALL create a new user account via Supabase Auth
3. THE FinBuddy System SHALL provide a login interface that authenticates users via Supabase Auth
4. WHEN a user successfully authenticates, THE FinBuddy System SHALL grant access to the Dashboard
5. THE FinBuddy System SHALL isolate each User's expense data by associating records with their unique user identifier

### Requirement 2

**User Story:** As a user, I want to manually add expenses with details like amount, category, date, and notes, so that I can maintain an accurate record of my spending.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide an Expense Entry Form with fields for amount, category, date, and note
2. WHEN a user submits a completed Expense Entry Form, THE FinBuddy System SHALL store the expense record in the Supabase Database
3. THE FinBuddy System SHALL associate each stored expense with the authenticated User's identifier
4. WHEN a user submits an Expense Entry Form with a missing amount field, THE FinBuddy System SHALL display a validation error message
5. THE FinBuddy System SHALL set the current date as the default value for the date field in the Expense Entry Form

### Requirement 3

**User Story:** As a user, I want to view all my expenses in a list sorted by date, so that I can review my transaction history chronologically.

#### Acceptance Criteria

1. THE FinBuddy System SHALL display a list of all expenses belonging to the authenticated User
2. THE FinBuddy System SHALL sort the expense list by date in descending order with the most recent expenses first
3. THE FinBuddy System SHALL display the amount, category, date, and note for each expense in the list
4. WHEN a user has no recorded expenses, THE FinBuddy System SHALL display an empty state message

### Requirement 4

**User Story:** As a user, I want to edit or delete existing expenses, so that I can correct mistakes or remove outdated transactions.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide an edit action for each expense in the expense list
2. WHEN a user selects the edit action for an expense, THE FinBuddy System SHALL populate the Expense Entry Form with the existing expense data
3. WHEN a user submits an edited expense, THE FinBuddy System SHALL update the corresponding record in the Supabase Database
4. THE FinBuddy System SHALL provide a delete action for each expense in the expense list
5. WHEN a user confirms deletion of an expense, THE FinBuddy System SHALL remove the corresponding record from the Supabase Database

### Requirement 5

**User Story:** As a user, I want to see a monthly spending summary on my dashboard, so that I can understand my total expenditure at a glance.

#### Acceptance Criteria

1. THE FinBuddy System SHALL calculate the total amount of all expenses for the current calendar month
2. THE FinBuddy System SHALL display the Monthly Summary on the Dashboard
3. WHEN the current calendar month changes, THE FinBuddy System SHALL recalculate the Monthly Summary for the new month
4. THE FinBuddy System SHALL display the Monthly Summary with a numeric value representing the total spending amount

### Requirement 6

**User Story:** As a user, I want to visualize my spending by category using a pie chart, so that I can identify which categories consume most of my budget.

#### Acceptance Criteria

1. THE FinBuddy System SHALL aggregate expense amounts by Category for the current calendar month
2. THE FinBuddy System SHALL display a pie chart on the Dashboard showing the proportion of spending per Category
3. WHEN a user has expenses in multiple categories, THE FinBuddy System SHALL render each Category as a distinct segment in the pie chart
4. WHEN a user has no expenses for the current month, THE FinBuddy System SHALL display an empty state message instead of the pie chart

### Requirement 7

**User Story:** As a user, I want to see a line chart showing my spending trends over time, so that I can track whether my spending is increasing or decreasing.

#### Acceptance Criteria

1. THE FinBuddy System SHALL aggregate daily expense totals for a time period spanning the most recent 30 days
2. THE FinBuddy System SHALL display a line chart on the Dashboard with dates on the x-axis and spending amounts on the y-axis
3. THE FinBuddy System SHALL plot each day's total spending as a data point on the line chart
4. WHEN a user has no expenses within the 30-day period, THE FinBuddy System SHALL display an empty state message instead of the line chart

### Requirement 8

**User Story:** As a user, I want to request AI-generated insights about my spending habits, so that I can receive personalized recommendations to improve my financial behavior.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide an action button on the Dashboard to trigger AI Insights generation
2. WHEN a user activates the AI Insights action, THE FinBuddy System SHALL send the user's recent expense data to the Google Gemini API
3. THE FinBuddy System SHALL format the API request to include a prompt requesting spending habit summary, two saving recommendations, and one motivational message
4. WHEN the Google Gemini API returns a response, THE FinBuddy System SHALL display the AI Insights text on the Dashboard
5. IF the Google Gemini API request fails, THEN THE FinBuddy System SHALL display an error message to the user

### Requirement 9

**User Story:** As a user, I want to view and update my profile information including my name and preferred currency, so that the application displays information relevant to my preferences.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide a profile interface displaying the User's name and preferred currency
2. THE FinBuddy System SHALL allow the User to edit their name and preferred currency through the profile interface
3. WHEN a user updates their profile information, THE FinBuddy System SHALL persist the changes to the Supabase Database
4. THE FinBuddy System SHALL display monetary amounts using the User's preferred currency symbol throughout the application

### Requirement 10

**User Story:** As a user, I want to log out of my account, so that I can secure my financial data when using shared devices.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide a logout action accessible from the Dashboard
2. WHEN a user activates the logout action, THE FinBuddy System SHALL terminate the user's authenticated session via Supabase Auth
3. WHEN a user's session is terminated, THE FinBuddy System SHALL redirect the user to the login interface
4. WHEN a user attempts to access the Dashboard without an authenticated session, THE FinBuddy System SHALL redirect the user to the login interface

### Requirement 11

**User Story:** As a user, I want the option to delete all my account data, so that I can remove my information from the system if I no longer wish to use the service.

#### Acceptance Criteria

1. THE FinBuddy System SHALL provide a delete account action in the profile interface
2. WHEN a user activates the delete account action, THE FinBuddy System SHALL display a confirmation dialog
3. WHEN a user confirms account deletion, THE FinBuddy System SHALL remove all expense records associated with the User from the Supabase Database
4. WHEN a user confirms account deletion, THE FinBuddy System SHALL delete the User's account from Supabase Auth
5. WHEN account deletion completes, THE FinBuddy System SHALL redirect the user to the sign-up interface
